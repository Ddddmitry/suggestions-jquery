!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):e(t.jQuery)}(this,function(t){"use strict";function e(t,e){return function(n,i){var s,o=[];return e(i)&&(s=E.splitTokens(E.split(n,t)),y.each(i,function(e,i){var a=e.value;if(E.stringEncloses(n,a))return!1;var r=E.splitTokens(E.split(a,t));0===y.minus(s,r).length&&o.push(i)})),1===o.length?o[0]:-1}}function n(t,e){var n=t.data&&t.data[e];return n&&new RegExp("^"+E.escapeRegExChars(n)+"(["+S+"]|$)","i").test(t.value)}function i(t,e){var n=/<strong>/;return n.test(e)&&!n.test(t)?e:t}function s(t,e,n,s,o){var a=this;return i(a.highlightMatches(t,n,s,o),a.highlightMatches(e,n,s,o))}function o(t){this.urlSuffix=t.toLowerCase(),this.noSuggestionsHint="Неизвестное значение",this.matchers=[O.matchByNormalizedQuery(),O.matchByWords()]}function a(e,n){var i=this;i.element=e,i.el=t(e),i.suggestions=[],i.badQueries=[],i.selectedIndex=-1,i.currentValue=i.element.value,i.intervalId=0,i.cachedResponse={},i.enrichmentCache={},i.currentRequest=null,i.inputPhase=t.Deferred(),i.fetchPhase=t.Deferred(),i.enrichPhase=t.Deferred(),i.onChangeTimeout=null,i.triggering={},i.$wrapper=null,i.options=t.extend({},j,n),i.classes=x,i.disabled=!1,i.selection=null,i.$viewport=t(window),i.$body=t(document.body),i.type=null,i.status={},i.setupElement(),i.initializer=t.Deferred(),i.el.is(":visible")?i.initializer.resolve():i.deferInitialization(),i.initializer.done(t.proxy(i.initialize,i))}function r(){L.each(K,function(t){t.abort()}),K={}}function l(){J=null,j.geoLocation=X}function c(e){return t.map(e,function(t){var e=L.escapeHtml(t.text);return e&&t.matched&&(e="<strong>"+e+"</strong>"),e}).join("")}function u(e,n){var i=e.split(", ");return 1===i.length?e:t.map(i,function(t){return'<span class="'+n+'">'+t+"</span>"}).join(", ")}function d(e,n){var i=!1;return t.each(e,function(t,e){if(i=e.value==n.value&&e!=n)return!1}),i}function f(t,e){var n=e.selection,i=n&&n.data&&e.bounds;return i&&y.each(e.bounds.all,function(e,s){return i=n.data[e]===t.data[e]}),i}function p(t){var e=t.replace(/^(\d{2})(\d*?)(0+)$/g,"$1$2"),n=e.length,i=-1;return n<=2?i=2:n>2&&n<=5?i=5:n>5&&n<=8?i=8:n>8&&n<=11?i=11:n>11&&n<=15?i=15:n>15&&(i=19),E.padEnd(e,i,"0")}function g(t){this.plan=t.status.plan,this.isMobile=t.isMobile;var e=t.getContainer();this.element=ht.selectByClass(x.promo,e)}function h(){new g(this).show()}t=t&&t.hasOwnProperty("default")?t.default:t;var m={isArray:function(t){return Array.isArray(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isEmptyObject:function(t){return 0===Object.keys(t).length&&t.constructor===Object},isPlainObject:function(t){return void 0!==t&&"object"==typeof t&&null!==t&&!t.nodeType&&t!==t.window&&!(t.constructor&&!Object.prototype.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))}},y={compact:function(t){return t.filter(function(t){return!!t})},each:function(t,e){if(Array.isArray(t))return void t.some(function(t,n){return!1===e(t,n)});Object.keys(t).some(function(n){var i=t[n];return!1===e(i,n)})},intersect:function(t,e){var n=[];return Array.isArray(t)&&Array.isArray(e)?t.filter(function(t){return-1!==e.indexOf(t)}):n},minus:function(t,e){return e&&0!==e.length?t.filter(function(t){return-1===e.indexOf(t)}):t},makeArray:function(t){return m.isArray(t)?Array.prototype.slice.call(t):[t]},minusWithPartialMatching:function(t,e){return e&&0!==e.length?t.filter(function(t){return!e.some(function(e){return 0===e.indexOf(t)})}):t},slice:function(t,e){return Array.prototype.slice.call(t,e)}},_={delay:function(t,e){return setTimeout(t,e||0)}},v={areSame:function t(e,n){var i=!0;return typeof e==typeof n&&("object"==typeof e&&null!=e&&null!=n?(y.each(e,function(e,s){return i=t(e,n[s])}),i):e===n)},assign:function(t,e){if("function"==typeof Object.assign)return Object.assign.apply(null,arguments);if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),i=1;i<arguments.length;i++){var s=arguments[i];if(null!=s)for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},clone:function(t){return JSON.parse(JSON.stringify(t))},compact:function(t){var e=v.clone(t);return y.each(e,function(t,n){null!==t&&void 0!==t&&""!==t||delete e[n]}),e},fieldsAreNotEmpty:function(t,e){if(!m.isPlainObject(t))return!1;var n=!0;return y.each(e,function(e,i){return n=!!t[e]}),n},getDeepValue:function t(e,n){var i=n.split("."),s=i.shift();return e&&(i.length?t(e[s],i.join(".")):e[s])},indexObjectsById:function(t,e,n){var i={};return y.each(t,function(t,s){var o=t[e],a={};n&&(a[n]=s),i[o]=v.assign(a,t)}),i}},b={ENTER:13,ESC:27,TAB:9,SPACE:32,UP:38,DOWN:40},x={hint:"suggestions-hint",mobile:"suggestions-mobile",nowrap:"suggestions-nowrap",promo:"suggestions-promo",promo_desktop:"suggestions-promo-desktop",selected:"suggestions-selected",suggestion:"suggestions-suggestion",subtext:"suggestions-subtext",subtext_inline:"suggestions-subtext suggestions-subtext_inline",subtext_delimiter:"suggestions-subtext-delimiter",subtext_label:"suggestions-subtext suggestions-subtext_label",removeConstraint:"suggestions-remove",value:"suggestions-value"},w=".suggestions",S="\\s\"'~\\*\\.,:\\|\\[\\]\\(\\)\\{\\}<>№",C=new RegExp("["+S+"]+","g"),k=new RegExp("[\\-\\+\\\\\\?!@#$%^&]+","g"),E={escapeHtml:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return t&&y.each(e,function(e,n){t=t.replace(new RegExp(n,"g"),e)}),t},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},formatToken:function(t){return t&&t.toLowerCase().replace(/[ёЁ]/g,"е")},getWordExtractorRegExp:function(){return new RegExp("([^"+S+"]*)(["+S+"]*)","g")},normalize:function(t,e){return E.split(t,e).join(" ")},padEnd:function(t,e,n){return String.prototype.padEnd?t.padEnd(e,n):(e>>=0,n=String(void 0!==n?n:" "),t.length>e?String(t):(e-=t.length,e>n.length&&(n+=n.repeat(e/n.length)),String(t)+n.slice(0,e)))},split:function(t,e){var n=t.toLowerCase().replace("ё","е").replace(/(\d+)([а-я]{2,})/g,"$1 $2").replace(/([а-я]+)(\d+)/g,"$1 $2"),i=y.compact(n.split(C));if(!i.length)return[];var s=i.pop(),o=y.minus(i,e);return o.push(s),o},splitTokens:function(t){var e=[];return y.each(t,function(t,n){var i=t.split(k);e=e.concat(y.compact(i))}),e},stringEncloses:function(t,e){return t.length>e.length&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},tokenize:function(t,e){var n=y.compact(E.formatToken(t).split(C)),i=y.minus(n,e),s=y.minus(n,i);return n=E.withSubTokens(i.concat(s))},withSubTokens:function(t){var e=[];return y.each(t,function(t,n){var i=t.split(k);e.push(t),i.length>1&&(e=e.concat(y.compact(i)))}),e}},B={Deferred:function(){return t.Deferred()},ajax:function(e){return t.ajax(e)},extend:function(){return t.extend.apply(null,arguments)},isJqObject:function(e){return e instanceof t},param:function(e){return t.param(e)},proxy:function(e,n){return t.proxy(e,n)},select:function(e){return t(e)},supportsCors:function(){return t.support.cors}},T={getDefaultType:function(){return B.supportsCors()?"POST":"GET"},getDefaultContentType:function(){return B.supportsCors()?"application/json":"application/x-www-form-urlencoded"},fixURLProtocol:function(t){return B.supportsCors()?t:t.replace(/^https?:/,location.protocol)},addUrlParams:function(t,e){return t+(/\?/.test(t)?"&":"?")+B.param(e)},serialize:function(t){return B.supportsCors()?JSON.stringify(t,function(t,e){return null===e?void 0:e}):(t=v.compact(t),B.param(t,!0))}},P=function(){var t=0;return function(e){return(e||"")+ ++t}}(),L={escapeRegExChars:E.escapeRegExChars,escapeHtml:E.escapeHtml,formatToken:E.formatToken,normalize:E.normalize,reWordExtractor:E.getWordExtractorRegExp,stringEncloses:E.stringEncloses,addUrlParams:T.addUrlParams,getDefaultContentType:T.getDefaultContentType,getDefaultType:T.getDefaultType,fixURLProtocol:T.fixURLProtocol,serialize:T.serialize,arrayMinus:y.minus,arrayMinusWithPartialMatching:y.minusWithPartialMatching,arraysIntersection:y.intersect,compact:y.compact,each:y.each,makeArray:y.makeArray,slice:y.slice,delay:_.delay,areSame:v.areSame,compactObject:v.compact,getDeepValue:v.getDeepValue,fieldsNotEmpty:v.fieldsAreNotEmpty,indexBy:v.indexObjectsById,isArray:m.isArray,isEmptyObject:m.isEmptyObject,isFunction:m.isFunction,isPlainObject:m.isPlainObject,uniqueId:P},j={autoSelectFirst:!1,serviceUrl:"https://suggestions.dadata.ru/suggestions/api/4_1/rs",url:null,onSearchStart:t.noop,onSearchComplete:t.noop,onSearchError:t.noop,onSuggestionsFetch:null,onSelect:null,onSelectNothing:null,onInvalidateSelection:null,minChars:1,deferRequestBy:100,enrichmentEnabled:!0,params:{},paramName:"query",timeout:3e3,formatResult:null,formatSelected:null,noCache:!1,containerClass:"suggestions-suggestions",tabDisabled:!1,triggerSelectOnSpace:!1,triggerSelectOnEnter:!0,triggerSelectOnBlur:!0,preventBadQueries:!1,hint:"Выберите вариант или продолжите ввод",noSuggestionsHint:null,type:null,requestMode:"suggest",count:5,$helpers:null,headers:null,scrollOnFocus:!0,mobileWidth:980,initializeInterval:100},V=function(t){return function(e){if(0===e.length)return!1;if(1===e.length)return!0;var n=t(e[0].value);return 0===e.filter(function(e){return 0!==t(e.value).indexOf(n)}).length}}(function(t){return t}),O={matchByNormalizedQuery:function(t){return function(e,n){var i=E.normalize(e,t),s=[];return y.each(n,function(n,o){var a=n.value.toLowerCase();return!E.stringEncloses(e,a)&&(!(a.indexOf(i)>0)&&void(i===E.normalize(a,t)&&s.push(o)))}),1===s.length?s[0]:-1}},matchByWords:function(t){return e(t,V)},matchByWordsAddress:function(t){return e(t,V)},matchByFields:function(t){return function(e,n){var i=E.splitTokens(E.split(e)),s=[];return 1===n.length&&(t&&y.each(t,function(t,e){var i=v.getDeepValue(n[0],e),o=i&&E.splitTokens(E.split(i,t));o&&o.length&&(s=s.concat(o))}),0===y.minusWithPartialMatching(i,s).length)?0:-1}}},F=["ао","аобл","дом","респ","а/я","аал","автодорога","аллея","арбан","аул","б-р","берег","бугор","вал","вл","волость","въезд","высел","г","городок","гск","д","двлд","днп","дор","дп","ж/д_будка","ж/д_казарм","ж/д_оп","ж/д_платф","ж/д_пост","ж/д_рзд","ж/д_ст","жилзона","жилрайон","жт","заезд","заимка","зона","к","казарма","канал","кв","кв-л","км","кольцо","комн","кордон","коса","кп","край","линия","лпх","м","массив","местность","мкр","мост","н/п","наб","нп","обл","округ","остров","оф","п","п/о","п/р","п/ст","парк","пгт","пер","переезд","пл","пл-ка","платф","погост","полустанок","починок","пр-кт","проезд","промзона","просек","просека","проселок","проток","протока","проулок","р-н","рзд","россия","рп","ряды","с","с/а","с/мо","с/о","с/п","с/с","сад","сквер","сл","снт","спуск","ст","ст-ца","стр","тер","тракт","туп","у","ул","уч-к","ф/х","ферма","х","ш","бульвар","владение","выселки","гаражно-строительный","город","деревня","домовладение","дорога","квартал","километр","комната","корпус","литер","леспромхоз","местечко","микрорайон","набережная","область","переулок","платформа","площадка","площадь","поселение","поселок","проспект","разъезд","район","республика","село","сельсовет","слобода","сооружение","станица","станция","строение","территория","тупик","улица","улус","участок","хутор","шоссе"],D=[{id:"kladr_id",fields:["kladr_id"],forBounds:!1,forLocations:!0},{id:"postal_code",fields:["postal_code"],forBounds:!1,forLocations:!0},{id:"country_iso_code",fields:["country_iso_code"],forBounds:!1,forLocations:!0},{id:"country",fields:["country"],forBounds:!0,forLocations:!0,kladrFormat:{digits:0,zeros:13},fiasType:"country_iso_code"},{id:"region_iso_code",fields:["region_iso_code"],forBounds:!1,forLocations:!0},{id:"region_fias_id",fields:["region_fias_id"],forBounds:!1,forLocations:!0},{id:"region_type_full",fields:["region_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:2,zeros:11},fiasType:"region_fias_id"},{id:"region",fields:["region","region_type","region_type_full","region_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:2,zeros:11},fiasType:"region_fias_id"},{id:"area_fias_id",fields:["area_fias_id"],forBounds:!1,forLocations:!0},{id:"area_type_full",fields:["area_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:5,zeros:8},fiasType:"area_fias_id"},{id:"area",fields:["area","area_type","area_type_full","area_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:5,zeros:8},fiasType:"area_fias_id"},{id:"city_fias_id",fields:["city_fias_id"],forBounds:!1,forLocations:!0},{id:"city_type_full",fields:["city_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:8,zeros:5},fiasType:"city_fias_id"},{id:"city",fields:["city","city_type","city_type_full","city_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:8,zeros:5},fiasType:"city_fias_id"},{id:"city_district_fias_id",fields:["city_district_fias_id"],forBounds:!1,forLocations:!0},{id:"city_district_type_full",fields:["city_district_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"city_district_fias_id"},{id:"city_district",fields:["city_district","city_district_type","city_district_type_full","city_district_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"city_district_fias_id"},{id:"settlement_fias_id",fields:["settlement_fias_id"],forBounds:!1,forLocations:!0},{id:"settlement_type_full",fields:["settlement_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"settlement_fias_id"},{id:"settlement",fields:["settlement","settlement_type","settlement_type_full","settlement_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"settlement_fias_id"},{id:"street_fias_id",fields:["street_fias_id"],forBounds:!1,forLocations:!0},{id:"street_type_full",fields:["street_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:15,zeros:2},fiasType:"street_fias_id"},{id:"street",fields:["street","street_type","street_type_full","street_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:15,zeros:2},fiasType:"street_fias_id"},{id:"house",fields:["house","house_type","house_type_full","block","block_type"],forBounds:!0,forLocations:!1,kladrFormat:{digits:19}}],R={urlSuffix:"address",noSuggestionsHint:"Неизвестный адрес",matchers:[O.matchByNormalizedQuery(F),O.matchByWordsAddress(F)],dataComponents:D,dataComponentsById:v.indexObjectsById(D,"id","index"),unformattableTokens:F,enrichmentEnabled:!0,enrichmentMethod:"suggest",enrichmentParams:{count:1,locations:null,locations_boost:null,from_bound:null,to_bound:null},getEnrichmentQuery:function(t){return t.unrestricted_value},geoEnabled:!0,isDataComplete:function(t){var e=[this.bounds.to||"flat"],n=t.data;return!m.isPlainObject(n)||v.fieldsAreNotEmpty(n,e)},composeValue:function(t,e){var n=t.country,i=t.region_with_type||y.compact([t.region,t.region_type]).join(" ")||t.region_type_full,s=t.area_with_type||y.compact([t.area_type,t.area]).join(" ")||t.area_type_full,o=t.city_with_type||y.compact([t.city_type,t.city]).join(" ")||t.city_type_full,a=t.settlement_with_type||y.compact([t.settlement_type,t.settlement]).join(" ")||t.settlement_type_full,r=t.city_district_with_type||y.compact([t.city_district_type,t.city_district]).join(" ")||t.city_district_type_full,l=t.street_with_type||y.compact([t.street_type,t.street]).join(" ")||t.street_type_full,c=y.compact([t.house_type,t.house,t.block_type,t.block]).join(" "),u=y.compact([t.flat_type,t.flat]).join(" "),d=t.postal_box&&"а/я "+t.postal_box;return i===o&&(i=""),e&&e.saveCityDistrict||(e&&e.excludeCityDistrict?r="":r&&!t.city_district_fias_id&&(r="")),y.compact([n,i,s,o,r,a,l,c,u,d]).join(", ")},formatResult:function(){var t=[],e=!1;return D.forEach(function(n){e&&t.push(n.id),"city_district"===n.id&&(e=!0)}),function(e,n,i,s){var o,a,r,l=this,c=i.data&&i.data.city_district_with_type,u=s&&s.unformattableTokens,d=i.data&&i.data.history_values;return d&&d.length>0&&(o=E.tokenize(n,u),a=this.type.findUnusedTokens(o,e),(r=this.type.getFormattedHistoryValues(a,d))&&(e+=r)),e=l.highlightMatches(e,n,i,s),e=l.wrapFormattedValue(e,i),c&&(!l.bounds.own.length||l.bounds.own.indexOf("street")>=0)&&!m.isEmptyObject(l.copyDataComponents(i.data,t))&&(e+='<div class="'+l.classes.subtext+'">'+l.highlightMatches(c,n,i)+"</div>"),e}}(),findUnusedTokens:function(t,e){return t.filter(function(t){return-1===e.indexOf(t)})},getFormattedHistoryValues:function(t,e){var n=[],i="";return e.forEach(function(e){y.each(t,function(t){if(e.toLowerCase().indexOf(t)>=0)return n.push(e),!1})}),n.length>0&&(i=" (бывш. "+n.join(", ")+")"),i},getSuggestionValue:function(t,e){var n=null;return e.hasSameValues?n=t.options.restrict_value?this.getValueWithinConstraints(t,e.suggestion):t.bounds.own.length?this.getValueWithinBounds(t,e.suggestion):e.suggestion.unrestricted_value:e.hasBeenEnriched&&t.options.restrict_value&&(n=this.getValueWithinConstraints(t,e.suggestion,{excludeCityDistrict:!0})),n},getValueWithinConstraints:function(t,e,n){return this.composeValue(t.getUnrestrictedData(e.data),n)},getValueWithinBounds:function(t,e,n){var i=t.copyDataComponents(e.data,t.bounds.own.concat(["city_district_fias_id"]));return this.composeValue(i,n)}},I=[{id:"kladr_id",fields:["kladr_id"],forBounds:!1,forLocations:!0},{id:"region_fias_id",fields:["region_fias_id"],forBounds:!1,forLocations:!0},{id:"region_type_full",fields:["region_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:2,zeros:11},fiasType:"region_fias_id"},{id:"region",fields:["region","region_type","region_type_full","region_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:2,zeros:11},fiasType:"region_fias_id"},{id:"area_fias_id",fields:["area_fias_id"],forBounds:!1,forLocations:!0},{id:"area_type_full",fields:["area_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:5,zeros:8},fiasType:"area_fias_id"},{id:"area",fields:["area","area_type","area_type_full","area_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:5,zeros:8},fiasType:"area_fias_id"},{id:"city_fias_id",fields:["city_fias_id"],forBounds:!1,forLocations:!0},{id:"city_type_full",fields:["city_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:8,zeros:5},fiasType:"city_fias_id"},{id:"city",fields:["city","city_type","city_type_full","city_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:8,zeros:5},fiasType:"city_fias_id"},{id:"city_district_fias_id",fields:["city_district_fias_id"],forBounds:!1,forLocations:!0},{id:"city_district_type_full",fields:["city_district_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"city_district_fias_id"},{id:"city_district",fields:["city_district","city_district_type","city_district_type_full","city_district_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"city_district_fias_id"},{id:"settlement_fias_id",fields:["settlement_fias_id"],forBounds:!1,forLocations:!0},{id:"settlement_type_full",fields:["settlement_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"settlement_fias_id"},{id:"settlement",fields:["settlement","settlement_type","settlement_type_full","settlement_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:11,zeros:2},fiasType:"settlement_fias_id"},{id:"planning_structure_fias_id",fields:["planning_structure_fias_id"],forBounds:!1,forLocations:!0},{id:"planning_structure_type_full",fields:["planning_structure_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:15,zeros:2},fiasType:"planning_structure_fias_id"},{id:"planning_structure",fields:["planning_structure","planning_structure_type","planning_structure_type_full","planning_structure_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:15,zeros:2},fiasType:"planning_structure_fias_id"},{id:"street_fias_id",fields:["street_fias_id"],forBounds:!1,forLocations:!0},{id:"street_type_full",fields:["street_type_full"],forBounds:!1,forLocations:!0,kladrFormat:{digits:15,zeros:2},fiasType:"street_fias_id"},{id:"street",fields:["street","street_type","street_type_full","street_with_type"],forBounds:!0,forLocations:!0,kladrFormat:{digits:15,zeros:2},fiasType:"street_fias_id"},{id:"house",fields:["house","house_type","block","building_type","building"],forBounds:!0,forLocations:!1,kladrFormat:{digits:19}}],q={urlSuffix:"fias",noSuggestionsHint:"Неизвестный адрес",matchers:[O.matchByNormalizedQuery(F),O.matchByWordsAddress(F)],dataComponents:I,dataComponentsById:v.indexObjectsById(I,"id","index"),unformattableTokens:F,isDataComplete:function(t){var e=[this.bounds.to||"house"],n=t.data;return!m.isPlainObject(n)||v.fieldsAreNotEmpty(n,e)},composeValue:function(t,e){var n=t.country,i=t.region_with_type||y.compact([t.region,t.region_type]).join(" ")||t.region_type_full,s=t.area_with_type||y.compact([t.area_type,t.area]).join(" ")||t.area_type_full,o=t.city_with_type||y.compact([t.city_type,t.city]).join(" ")||t.city_type_full,a=t.settlement_with_type||y.compact([t.settlement_type,t.settlement]).join(" ")||t.settlement_type_full,r=t.city_district_with_type||y.compact([t.city_district_type,t.city_district]).join(" ")||t.city_district_type_full,l=t.planning_structure_with_type||y.compact([t.planning_structure_type,t.planning_structure]).join(" ")||t.planning_structure_type_full,c=t.street_with_type||y.compact([t.street_type,t.street]).join(" ")||t.street_type_full,u=y.compact([t.house_type,t.house,t.block_type,t.block]).join(" "),d=y.compact([t.flat_type,t.flat]).join(" "),f=t.postal_box&&"а/я "+t.postal_box;return i===o&&(i=""),e&&e.saveCityDistrict||(e&&e.excludeCityDistrict?r="":r&&!t.city_district_fias_id&&(r="")),y.compact([n,i,s,o,r,a,l,c,u,d,f]).join(", ")},formatResult:function(){return function(t,e,n,i){var s=this;return t=s.highlightMatches(t,e,n,i),t=s.wrapFormattedValue(t,n)}}(),getSuggestionValue:R.getSuggestionValue,getValueWithinConstraints:R.getValueWithinConstraints,getValueWithinBounds:R.getValueWithinBounds},$={urlSuffix:"fio",noSuggestionsHint:!1,matchers:[O.matchByNormalizedQuery(),O.matchByWords()],fieldNames:{surname:"фамилия",name:"имя",patronymic:"отчество"},isDataComplete:function(t){var e,i=this,s=i.options.params,o=t.data;return m.isFunction(s)&&(s=s.call(i.element,t.value)),s&&s.parts?e=s.parts.map(function(t){return t.toLowerCase()}):(e=["surname","name"],n(t,"surname")&&e.push("patronymic")),v.fieldsAreNotEmpty(o,e)},composeValue:function(t){return y.compact([t.surname,t.name,t.patronymic]).join(" ")}},z={LEGAL:[2,2,5,1],INDIVIDUAL:[2,2,6,2]},A={urlSuffix:"party",noSuggestionsHint:"Неизвестная организация",matchers:[O.matchByFields({value:null,"data.address.value":F,"data.inn":null,"data.ogrn":null})],dataComponents:D,enrichmentEnabled:!0,enrichmentMethod:"findById",enrichmentParams:{count:1,locations_boost:null},getEnrichmentQuery:function(t){return t.data.hid},geoEnabled:!0,formatResult:function(t,e,n,o){var a=this,r=a.type.formatResultInn.call(a,n,e),l=a.highlightMatches(v.getDeepValue(n.data,"ogrn"),e,n),c=i(r,l),u=a.highlightMatches(v.getDeepValue(n.data,"management.name"),e,n),d=v.getDeepValue(n.data,"address.value")||"";return a.isMobile&&((o||(o={})).maxLength=50),t=s.call(a,t,v.getDeepValue(n.data,"name.latin"),e,n,o),t=a.wrapFormattedValue(t,n),d&&(d=d.replace(/^(\d{6}?\s+|Россия,\s+)/i,""),d=a.isMobile?d.replace(new RegExp("^([^"+S+"]+["+S+"]+[^"+S+"]+).*"),"$1"):a.highlightMatches(d,e,n,{unformattableTokens:F})),(c||d||u)&&(t+='<div class="'+a.classes.subtext+'"><span class="'+a.classes.subtext_inline+'">'+(c||"")+"</span>"+(i(d,u)||"")+"</div>"),t},formatResultInn:function(t,e){var n,i,s=this,o=t.data&&t.data.inn,a=z[t.data&&t.data.type],r=/\d/;if(o)return i=s.highlightMatches(o,e,t),a&&(i=i.split(""),n=a.map(function(t){for(var e,n="";t&&(e=i.shift());)n+=e,r.test(e)&&t--;return n}),i=n.join('<span class="'+s.classes.subtext_delimiter+'"></span>')+i.join("")),i}},N={urlSuffix:"email",noSuggestionsHint:!1,matchers:[O.matchByNormalizedQuery()],isQueryRequestable:function(t){return this.options.suggest_local||t.indexOf("@")>=0}},M={urlSuffix:"bank",noSuggestionsHint:"Неизвестный банк",matchers:[O.matchByFields({value:null,"data.bic":null,"data.swift":null})],dataComponents:D,geoEnabled:!0,formatResult:function(t,e,n,i){var s=this,o=s.highlightMatches(v.getDeepValue(n.data,"bic"),e,n),a=v.getDeepValue(n.data,"address.value")||"";return t=s.highlightMatches(t,e,n,i),t=s.wrapFormattedValue(t,n),a&&(a=a.replace(/^\d{6}( РОССИЯ)?, /i,""),a=s.isMobile?a.replace(new RegExp("^([^"+S+"]+["+S+"]+[^"+S+"]+).*"),"$1"):s.highlightMatches(a,e,n,{unformattableTokens:F})),(o||a)&&(t+='<div class="'+s.classes.subtext+'"><span class="'+s.classes.subtext_inline+'">'+o+"</span>"+a+"</div>"),t},formatSelected:function(t){return v.getDeepValue(t,"data.name.payment")||null}},H={NAME:$,ADDRESS:R,FIAS:q,PARTY:A,EMAIL:N,BANK:M};H.get=function(t){return H.hasOwnProperty(t)?H[t]:new o(t)},B.extend(j,{suggest_local:!0});var W={chains:{},on:function(t,e){return this.get(t).push(e),this},get:function(t){var e=this.chains;return e[t]||(e[t]=[])}},U={suggest:{defaultParams:{type:L.getDefaultType(),dataType:"json",contentType:L.getDefaultContentType()},addTypeInUrl:!0},"iplocate/address":{defaultParams:{type:"GET",dataType:"json"},addTypeInUrl:!1},status:{defaultParams:{type:"GET",dataType:"json"},addTypeInUrl:!0},findById:{defaultParams:{type:L.getDefaultType(),dataType:"json",contentType:L.getDefaultContentType()},addTypeInUrl:!0}},Q={suggest:{method:"suggest",userSelect:!0,updateValue:!0,enrichmentEnabled:!0},findById:{method:"findById",userSelect:!1,updateValue:!1,enrichmentEnabled:!1}};a.prototype={initialize:function(){var t=this;t.uniqueId=L.uniqueId("i"),t.createWrapper(),t.notify("initialize"),t.setOptions(),t.fixPosition()},deferInitialization:function(){var t,e=this,n="mouseover focus keydown",i=function(){e.initializer.resolve(),e.enable()};e.initializer.always(function(){e.el.off(n,i),clearInterval(t)}),e.disabled=!0,e.el.on(n,i),t=setInterval(function(){e.el.is(":visible")&&i()},e.options.initializeInterval)},isInitialized:function(){return"resolved"===this.initializer.state()},dispose:function(){var t=this;t.initializer.reject(),t.notify("dispose"),t.el.removeData("suggestions").removeClass("suggestions-input"),t.removeWrapper(),t.el.trigger("suggestions-dispose")},notify:function(e){var n=this,i=L.slice(arguments,1);return t.map(W.get(e),function(t){return t.apply(n,i)})},createWrapper:function(){var e=this;e.$wrapper=t('<div class="suggestions-wrapper"/>'),e.el.after(e.$wrapper),e.$wrapper.on("mousedown"+w,t.proxy(e.onMousedown,e))},removeWrapper:function(){var e=this;e.$wrapper&&e.$wrapper.remove(),t(e.options.$helpers).off(w)},onMousedown:function(e){var n=this;e.preventDefault(),n.cancelBlur=!0,L.delay(function(){delete n.cancelBlur}),0==t(e.target).closest(".ui-menu-item").length&&L.delay(function(){t(document).one("mousedown",function(e){var i=n.el.add(n.$wrapper).add(n.options.$helpers);n.options.floating&&(i=i.add(n.$container)),i=i.filter(function(){return this===e.target||t.contains(this,e.target)}),i.length||n.hide()})})},scrollToTop:function(){var e=this,n=e.options.scrollOnFocus;!0===n&&(n=e.el),n instanceof t&&n.length>0&&t("body,html").animate({scrollTop:n.offset().top},"fast")},setOptions:function(e){var n=this;t.extend(n.options,e),n.type=H.get(n.options.type),t.each({requestMode:Q},function(e,i){if(n[e]=i[n.options[e]],!n[e])throw n.disable(),"`"+e+"` option is incorrect! Must be one of: "+t.map(i,function(t,e){return'"'+e+'"'}).join(", ")}),t(n.options.$helpers).off(w).on("mousedown"+w,t.proxy(n.onMousedown,n)),n.isInitialized()&&n.notify("setOptions")},fixPosition:function(e){var n,i,s=this,o={};s.isMobile=s.$viewport.width()<=s.options.mobileWidth,s.isInitialized()&&(!e||"scroll"!=e.type||s.options.floating||s.isMobile)&&(s.$container.appendTo(s.options.floating?s.$body:s.$wrapper),s.notify("resetPosition"),s.el.css("paddingLeft",""),s.el.css("paddingRight",""),o.paddingLeft=parseFloat(s.el.css("paddingLeft")),o.paddingRight=parseFloat(s.el.css("paddingRight")),t.extend(o,s.el.offset()),o.borderTop="none"==s.el.css("border-top-style")?0:parseFloat(s.el.css("border-top-width")),o.borderLeft="none"==s.el.css("border-left-style")?0:parseFloat(s.el.css("border-left-width")),o.innerHeight=s.el.innerHeight(),o.innerWidth=s.el.innerWidth(),o.outerHeight=s.el.outerHeight(),o.componentsLeft=0,o.componentsRight=0,n=s.$wrapper.offset(),i={top:o.top-n.top,left:o.left-n.left},s.notify("fixPosition",i,o),o.componentsLeft>o.paddingLeft&&s.el.css("paddingLeft",o.componentsLeft+"px"),o.componentsRight>o.paddingRight&&s.el.css("paddingRight",o.componentsRight+"px"))},clearCache:function(){this.cachedResponse={},this.enrichmentCache={},this.badQueries=[]},clear:function(){var t=this,e=t.selection;t.isInitialized()&&(t.clearCache(),t.currentValue="",t.selection=null,t.hide(),t.suggestions=[],t.el.val(""),t.el.trigger("suggestions-clear"),t.notify("clear"),t.trigger("InvalidateSelection",e))},disable:function(){var t=this;t.disabled=!0,t.abortRequest(),t.visible&&t.hide()},enable:function(){this.disabled=!1},isUnavailable:function(){return this.disabled},update:function(){var t=this,e=t.el.val();t.isInitialized()&&(t.currentValue=e,t.isQueryRequestable(e)?t.updateSuggestions(e):t.hide())},setSuggestion:function(e){var n,i,s=this;t.isPlainObject(e)&&t.isPlainObject(e.data)&&(e=t.extend(!0,{},e),s.isUnavailable()&&s.initializer&&"pending"===s.initializer.state()&&(s.initializer.resolve(),s.enable()),s.bounds.own.length&&(s.checkValueBounds(e),n=s.copyDataComponents(e.data,s.bounds.all),e.data.kladr_id&&(n.kladr_id=s.getBoundedKladrId(e.data.kladr_id,s.bounds.all)),e.data=n),s.selection=e,s.suggestions=[e],i=s.getSuggestionValue(e)||"",s.currentValue=i,s.el.val(i),s.abortRequest(),s.el.trigger("suggestions-set"))},fixData:function(){var e=this,n=e.extendedCurrentValue(),i=e.el.val(),s=t.Deferred();s.done(function(t){e.selectSuggestion(t,0,i,{hasBeenEnriched:!0}),e.el.trigger("suggestions-fixdata",t)}).fail(function(){e.selection=null,e.el.trigger("suggestions-fixdata")}),e.isQueryRequestable(n)?(e.currentValue=n,e.getSuggestions(n,{count:1,from_bound:null,to_bound:null}).done(function(t){var e=t[0];e?s.resolve(e):s.reject()}).fail(function(){s.reject()})):s.reject()},extendedCurrentValue:function(){var e=this,n=e.getParentInstance(),i=n&&n.extendedCurrentValue(),s=t.trim(e.el.val());return L.compact([i,s]).join(" ")},getAjaxParams:function(e,n){var i=this,s=t.trim(i.options.token),o=t.trim(i.options.partner),r=i.options.serviceUrl,l=i.options.url,c=U[e],u=t.extend({timeout:i.options.timeout},c.defaultParams),d={};return l?r=l:(/\/$/.test(r)||(r+="/"),r+=e,c.addTypeInUrl&&(r+="/"+i.type.urlSuffix)),r=L.fixURLProtocol(r),t.support.cors?(s&&(d.Authorization="Token "+s),o&&(d["X-Partner"]=o),d["X-Version"]=a.version,u.headers||(u.headers={}),u.xhrFields||(u.xhrFields={}),t.extend(u.headers,i.options.headers,d),u.xhrFields.withCredentials=!1):(s&&(d.token=s),o&&(d.partner=o),d.version=a.version,r=L.addUrlParams(r,d)),u.url=r,t.extend(u,n)},isQueryRequestable:function(t){var e,n=this;return e=t.length>=n.options.minChars,e&&n.type.isQueryRequestable&&(e=n.type.isQueryRequestable.call(n,t)),e},constructRequestParams:function(e,n){var i=this,s=i.options,o=t.isFunction(s.params)?s.params.call(i.element,e):t.extend({},s.params);return i.type.constructRequestParams&&t.extend(o,i.type.constructRequestParams.call(i)),t.each(i.notify("requestParams"),function(e,n){t.extend(o,n)}),o[s.paramName]=e,t.isNumeric(s.count)&&s.count>0&&(o.count=s.count),t.extend(o,n)},updateSuggestions:function(t){var e=this;e.fetchPhase=e.getSuggestions(t).done(function(n){e.assignSuggestions(n,t)})},getSuggestions:function(e,n,i){var s,o=this,a=o.options,r=i&&i.noCallbacks,l=i&&i.useEnrichmentCache,c=i&&i.method||o.requestMode.method,u=o.constructRequestParams(e,n),d=t.param(u||{}),f=t.Deferred();return s=o.cachedResponse[d],
s&&t.isArray(s.suggestions)?f.resolve(s.suggestions):o.isBadQuery(e)?f.reject():r||!1!==a.onSearchStart.call(o.element,u)?o.doGetSuggestions(u,c).done(function(t){o.processResponse(t)&&e==o.currentValue?(a.noCache||(l?o.enrichmentCache[e]=t.suggestions[0]:(o.enrichResponse(t,e),o.cachedResponse[d]=t,a.preventBadQueries&&0===t.suggestions.length&&o.badQueries.push(e))),f.resolve(t.suggestions)):f.reject(),r||a.onSearchComplete.call(o.element,e,t.suggestions)}).fail(function(t,n,i){f.reject(),r||"abort"===n||a.onSearchError.call(o.element,e,t,n,i)}):f.reject(),f},doGetSuggestions:function(e,n){var i=this,s=t.ajax(i.getAjaxParams(n,{data:L.serialize(e)}));return i.abortRequest(),i.currentRequest=s,i.notify("request"),s.always(function(){i.currentRequest=null,i.notify("request")}),s},isBadQuery:function(e){if(!this.options.preventBadQueries)return!1;var n=!1;return t.each(this.badQueries,function(t,i){return!(n=0===e.indexOf(i))}),n},abortRequest:function(){var t=this;t.currentRequest&&t.currentRequest.abort()},processResponse:function(e){var n,i=this;return!(!e||!t.isArray(e.suggestions))&&(i.verifySuggestionsFormat(e.suggestions),i.setUnrestrictedValues(e.suggestions),t.isFunction(i.options.onSuggestionsFetch)&&(n=i.options.onSuggestionsFetch.call(i.element,e.suggestions),t.isArray(n)&&(e.suggestions=n)),!0)},verifySuggestionsFormat:function(e){"string"==typeof e[0]&&t.each(e,function(t,n){e[t]={value:n,data:null}})},getSuggestionValue:function(e,n){var i,s=this,o=s.options.formatSelected||s.type.formatSelected,a=n&&n.hasSameValues,r=n&&n.hasBeenEnriched,l=null;return t.isFunction(o)&&(i=o.call(s,e)),"string"!=typeof i&&(i=e.value,s.type.getSuggestionValue&&null!==(l=s.type.getSuggestionValue(s,{suggestion:e,hasSameValues:a,hasBeenEnriched:r}))&&(i=l)),i},hasSameValues:function(e){var n=!1;return t.each(this.suggestions,function(t,i){if(i.value===e.value&&i!==e)return n=!0,!1}),n},assignSuggestions:function(t,e){var n=this;n.suggestions=t,n.notify("assignSuggestions",e)},shouldRestrictValues:function(){var t=this;return t.options.restrict_value&&t.constraints&&1==Object.keys(t.constraints).length},setUnrestrictedValues:function(e){var n=this,i=n.shouldRestrictValues(),s=n.getFirstConstraintLabel();t.each(e,function(t,e){e.unrestricted_value||(e.unrestricted_value=i?s+", "+e.value:e.value)})},areSuggestionsSame:function(t,e){return t&&e&&t.value===e.value&&L.areSame(t.data,e.data)},getNoSuggestionsHint:function(){var t=this;return!1!==t.options.noSuggestionsHint&&(t.options.noSuggestionsHint||t.type.noSuggestionsHint)}};var Z={setupElement:function(){this.el.attr("autocomplete","off").attr("autocorrect","off").attr("autocapitalize","off").attr("spellcheck","false").addClass("suggestions-input").css("box-sizing","border-box")},bindElementEvents:function(){var e=this;e.el.on("keydown"+w,t.proxy(e.onElementKeyDown,e)),e.el.on(["keyup"+w,"cut"+w,"paste"+w,"input"+w].join(" "),t.proxy(e.onElementKeyUp,e)),e.el.on("blur"+w,t.proxy(e.onElementBlur,e)),e.el.on("focus"+w,t.proxy(e.onElementFocus,e))},unbindElementEvents:function(){this.el.off(w)},onElementBlur:function(){var t=this;if(t.cancelBlur)return void(t.cancelBlur=!1);t.options.triggerSelectOnBlur?t.isUnavailable()||t.selectCurrentValue({noSpace:!0}).always(function(){t.hide()}):t.hide(),t.fetchPhase.abort&&t.fetchPhase.abort()},onElementFocus:function(){var e=this;e.cancelFocus||L.delay(t.proxy(e.completeOnFocus,e)),e.cancelFocus=!1},onElementKeyDown:function(t){var e=this;if(!e.isUnavailable())if(e.visible){switch(t.which){case b.ESC:e.el.val(e.currentValue),e.hide(),e.abortRequest();break;case b.TAB:if(!1===e.options.tabDisabled)return;break;case b.ENTER:e.options.triggerSelectOnEnter&&e.selectCurrentValue();break;case b.SPACE:return void(e.options.triggerSelectOnSpace&&e.isCursorAtEnd()&&(t.preventDefault(),e.selectCurrentValue({continueSelecting:!0,dontEnrich:!0}).fail(function(){e.currentValue+=" ",e.el.val(e.currentValue),e.proceedChangedValue()})));case b.UP:e.moveUp();break;case b.DOWN:e.moveDown();break;default:return}t.stopImmediatePropagation(),t.preventDefault()}else switch(t.which){case b.DOWN:e.suggest();break;case b.ENTER:e.options.triggerSelectOnEnter&&e.triggerOnSelectNothing()}},onElementKeyUp:function(t){var e=this;if(!e.isUnavailable()){switch(t.which){case b.UP:case b.DOWN:case b.ENTER:return}clearTimeout(e.onChangeTimeout),e.inputPhase.reject(),e.currentValue!==e.el.val()&&e.proceedChangedValue()}},proceedChangedValue:function(){var e=this;e.abortRequest(),e.inputPhase=t.Deferred().done(t.proxy(e.onValueChange,e)),e.options.deferRequestBy>0?e.onChangeTimeout=L.delay(function(){e.inputPhase.resolve()},e.options.deferRequestBy):e.inputPhase.resolve()},onValueChange:function(){var t,e=this;e.selection&&(t=e.selection,e.selection=null,e.trigger("InvalidateSelection",t)),e.selectedIndex=-1,e.update(),e.notify("valueChange")},completeOnFocus:function(){var t=this;t.isUnavailable()||t.isElementFocused()&&(t.update(),t.isMobile&&(t.setCursorAtEnd(),t.scrollToTop()))},isElementFocused:function(){return document.activeElement===this.element},isElementDisabled:function(){return Boolean(this.element.getAttribute("disabled")||this.element.getAttribute("readonly"))},isCursorAtEnd:function(){var t,e,n=this,i=n.el.val().length;try{if("number"==typeof(t=n.element.selectionStart))return t===i}catch(t){}return!document.selection||(e=document.selection.createRange(),e.moveStart("character",-i),i===e.text.length)},setCursorAtEnd:function(){var t=this.element;try{t.selectionEnd=t.selectionStart=t.value.length,t.scrollLeft=t.scrollWidth}catch(e){t.value=t.value}}};t.extend(a.prototype,Z),W.on("initialize",Z.bindElementEvents).on("dispose",Z.unbindElementEvents);var K={};r();var G={checkStatus:function(){function t(t){L.isFunction(e.options.onSearchError)&&e.options.onSearchError.call(e.element,null,s,"error",t)}var e=this,n=e.options.token&&e.options.token.trim()||"",i=e.options.type+n,s=K[i];s||(s=K[i]=B.ajax(e.getAjaxParams("status"))),s.done(function(n,i,s){if(n.search){var o=s.getResponseHeader("X-Plan");n.plan=o,B.extend(e.status,n)}else t("Service Unavailable")}).fail(function(){t(s.statusText)})}};a.resetTokens=r,B.extend(a.prototype,G),W.on("setOptions",G.checkStatus);var J,X=!0,Y={checkLocation:function(){var e=this,n=e.options.geoLocation;e.type.geoEnabled&&n&&(e.geoLocation=t.Deferred(),t.isPlainObject(n)||t.isArray(n)?e.geoLocation.resolve(n):(J||(J=t.ajax(e.getAjaxParams("iplocate/address"))),J.done(function(t){var n=t&&t.location&&t.location.data;n&&n.kladr_id?e.geoLocation.resolve({kladr_id:n.kladr_id}):e.geoLocation.reject()}).fail(function(){e.geoLocation.reject()})))},getGeoLocation:function(){return this.geoLocation},constructParams:function(){var e=this,n={};return e.geoLocation&&t.isFunction(e.geoLocation.promise)&&"resolved"==e.geoLocation.state()&&e.geoLocation.done(function(e){n.locations_boost=t.makeArray(e)}),n}};"GET"!=L.getDefaultType()&&(t.extend(j,{geoLocation:X}),t.extend(a,{resetLocation:l}),t.extend(a.prototype,{getGeoLocation:Y.getGeoLocation}),W.on("setOptions",Y.checkLocation).on("requestParams",Y.constructParams));var tt={enrichSuggestion:function(e,n){var i=this,s=t.Deferred();if(!i.options.enrichmentEnabled||!i.type.enrichmentEnabled||!i.requestMode.enrichmentEnabled||n&&n.dontEnrich)return s.resolve(e);if(e.data&&null!=e.data.qc)return s.resolve(e);i.disableDropdown();var o=i.type.getEnrichmentQuery(e),a=i.type.enrichmentParams,r={noCallbacks:!0,useEnrichmentCache:!0,method:i.type.enrichmentMethod};return i.currentValue=o,i.enrichPhase=i.getSuggestions(o,a,r).always(function(){i.enableDropdown()}).done(function(t){var n=t&&t[0];s.resolve(n||e,!!n)}).fail(function(){s.resolve(e)}),s},enrichResponse:function(e,n){var i=this,s=i.enrichmentCache[n];s&&t.each(e.suggestions,function(t,i){if(i.value===n)return e.suggestions[t]=s,!1})}};t.extend(a.prototype,tt);var et={width:"auto",floating:!1},nt={createContainer:function(){var e=this,n="."+e.classes.suggestion,i=e.options,s=t("<div/>").addClass(i.containerClass).css({position:"absolute",display:"none"});e.$container=s,s.on("click"+w,n,t.proxy(e.onSuggestionClick,e))},getContainer:function(){return this.$container.get(0)},removeContainer:function(){var t=this;t.options.floating&&t.$container.remove()},setContainerOptions:function(){var e=this;e.$container.off("mousedown.suggestions"),e.options.floating&&e.$container.on("mousedown.suggestions",t.proxy(e.onMousedown,e))},onSuggestionClick:function(e){var n,i=this,s=t(e.target);if(!i.dropdownDisabled){for(i.cancelFocus=!0,i.el.focus();s.length&&!(n=s.attr("data-index"));)s=s.closest("."+i.classes.suggestion);n&&!isNaN(n)&&i.select(+n)}},setDropdownPosition:function(t,e){var n,i=this,s=i.$viewport.scrollLeft();i.isMobile?(n=i.options.floating?{left:s+"px",top:e.top+e.outerHeight+"px"}:{left:t.left-e.left+s+"px",top:t.top+e.outerHeight+"px"},n.width=i.$viewport.width()+"px"):(n=i.options.floating?{left:e.left+"px",top:e.top+e.borderTop+e.innerHeight+"px"}:{left:t.left+"px",top:t.top+e.borderTop+e.innerHeight+"px"},L.delay(function(){var t=i.options.width;"auto"===t&&(t=i.el.outerWidth()),i.$container.outerWidth(t)})),i.$container.toggleClass(i.classes.mobile,i.isMobile).css(n),i.containerItemsPadding=e.left+e.borderLeft+e.paddingLeft-s},setItemsPositions:function(){var t=this;t.getSuggestionsItems().css("paddingLeft",t.isMobile?t.containerItemsPadding+"px":"")},getSuggestionsItems:function(){return this.$container.children("."+this.classes.suggestion)},toggleDropdownEnabling:function(t){this.dropdownDisabled=!t,this.$container.attr("disabled",!t)},disableDropdown:function(){this.toggleDropdownEnabling(!1)},enableDropdown:function(){this.toggleDropdownEnabling(!0)},hasSuggestionsToChoose:function(){var e=this;return e.suggestions.length>1||1===e.suggestions.length&&(!e.selection||t.trim(e.suggestions[0].value)!==t.trim(e.selection.value))},suggest:function(){var e=this,n=e.options,i=[];if(e.requestMode.userSelect){if(e.hasSuggestionsToChoose())!e.isMobile&&n.hint&&e.suggestions.length&&i.push('<div class="'+e.classes.hint+'">'+n.hint+"</div>"),e.selectedIndex=-1,e.suggestions.forEach(function(t,n){t==e.selection&&(e.selectedIndex=n),e.buildSuggestionHtml(t,n,i)});else{if(e.suggestions.length)return void e.hide();var s=e.getNoSuggestionsHint();if(!s)return void e.hide();i.push('<div class="'+e.classes.hint+'">'+s+"</div>")}i.push('<div class="'+x.promo+'"></div>'),i.push("</div>"),e.$container.html(i.join("")),n.autoSelectFirst&&-1===e.selectedIndex&&(e.selectedIndex=0),-1!==e.selectedIndex&&e.getSuggestionsItems().eq(e.selectedIndex).addClass(e.classes.selected),t.isFunction(n.beforeRender)&&n.beforeRender.call(e.element,e.$container),e.$container.show(),e.visible=!0,e.setItemsPositions()}},buildSuggestionHtml:function(t,e,n){n.push('<div class="'+this.classes.suggestion+'" data-index="'+e+'">');var i=this.options.formatResult||this.type.formatResult||this.formatResult;n.push(i.call(this,t.value,this.currentValue,t,{unformattableTokens:this.type.unformattableTokens}));var s=this.makeSuggestionLabel(this.suggestions,t);s&&n.push('<span class="'+this.classes.subtext_label+'">'+L.escapeHtml(s)+"</span>"),n.push("</div>")},wrapFormattedValue:function(t,e){var n=this,i=L.getDeepValue(e.data,"state.status");return'<span class="'+n.classes.value+'"'+(i?' data-suggestion-status="'+i+'"':"")+">"+t+"</span>"},formatResult:function(t,e,n,i){var s=this;return t=s.highlightMatches(t,e,n,i),s.wrapFormattedValue(t,n)},highlightMatches:function(e,n,i,s){var o,a,r,l,d,f,p,g=this,h=[],m=s&&s.unformattableTokens,y=s&&s.maxLength,_=L.reWordExtractor();if(!e)return"";for(o=E.tokenize(n,m),a=t.map(o,function(t){return new RegExp("^((.*)([\\-\\+\\\\\\?!@#$%^&]+))?("+L.escapeRegExChars(t)+")([^\\-\\+\\\\\\?!@#$%^&]*[\\-\\+\\\\\\?!@#$%^&]*)","i")});(r=_.exec(e))&&r[0];)l=r[1],h.push({text:l,hasUpperCase:l.toLowerCase()!==l,formatted:L.formatToken(l),matchable:!0}),r[2]&&h.push({text:r[2]});for(d=0;d<h.length;d++)f=h[d],!f.matchable||f.matched||-1!==t.inArray(f.formatted,m)&&!f.hasUpperCase||t.each(a,function(t,e){var n,i=e.exec(f.formatted),s=d+1;if(i)return i={before:i[1]||"",beforeText:i[2]||"",beforeDelimiter:i[3]||"",text:i[4]||"",after:i[5]||""},i.before&&(h.splice(d,0,{text:f.text.substr(0,i.beforeText.length),formatted:i.beforeText,matchable:!0},{text:i.beforeDelimiter}),s+=2,n=i.before.length,f.text=f.text.substr(n),f.formatted=f.formatted.substr(n),d--),n=i.text.length+i.after.length,f.formatted.length>n&&(h.splice(s,0,{text:f.text.substr(n),formatted:f.formatted.substr(n),matchable:!0}),f.text=f.text.substr(0,n),f.formatted=f.formatted.substr(0,n)),i.after&&(n=i.text.length,h.splice(s,0,{text:f.text.substr(n),formatted:f.formatted.substr(n)}),f.text=f.text.substr(0,n),f.formatted=f.formatted.substr(0,n)),f.matched=!0,!1});if(y){for(d=0;d<h.length&&y>=0;d++)f=h[d],(y-=f.text.length)<0&&(f.text=f.text.substr(0,f.text.length+y)+"...");h.length=d}return p=c(h),u(p,g.classes.nowrap)},makeSuggestionLabel:function(e,n){var i,s,o=this,a=o.type.fieldNames,r={},l=L.reWordExtractor(),c=[];if(a&&d(e,n)&&n.data&&(t.each(a,function(t){var e=n.data[t];e&&(r[t]=L.formatToken(e))}),!t.isEmptyObject(r))){for(;(i=l.exec(L.formatToken(n.value)))&&(s=i[1]);)t.each(r,function(t,e){if(e==s)return c.push(a[t]),delete r[t],!1});if(c.length)return c.join(", ")}},hide:function(){var t=this;t.visible=!1,t.selectedIndex=-1,t.$container.hide().empty()},activate:function(t){var e,n,i=this,s=i.classes.selected;return!i.dropdownDisabled&&(n=i.getSuggestionsItems(),n.removeClass(s),i.selectedIndex=t,-1!==i.selectedIndex&&n.length>i.selectedIndex)?(e=n.eq(i.selectedIndex),e.addClass(s),e):null},deactivate:function(t){var e=this;e.dropdownDisabled||(e.selectedIndex=-1,e.getSuggestionsItems().removeClass(e.classes.selected),t&&e.el.val(e.currentValue))},moveUp:function(){var t=this;if(!t.dropdownDisabled)return-1===t.selectedIndex?void(t.suggestions.length&&t.adjustScroll(t.suggestions.length-1)):0===t.selectedIndex?void t.deactivate(!0):void t.adjustScroll(t.selectedIndex-1)},moveDown:function(){var t=this;if(!t.dropdownDisabled)return t.selectedIndex===t.suggestions.length-1?void t.deactivate(!0):void t.adjustScroll(t.selectedIndex+1)},adjustScroll:function(t){var e,n,i,s=this,o=s.activate(t),a=s.$container.scrollTop();o&&o.length&&(e=o.position().top,e<0?s.$container.scrollTop(a+e):(n=e+o.outerHeight(),i=s.$container.innerHeight(),n>i&&s.$container.scrollTop(a-i+n)),s.el.val(s.suggestions[t].value))}};t.extend(j,et),t.extend(a.prototype,nt),W.on("initialize",nt.createContainer).on("dispose",nt.removeContainer).on("setOptions",nt.setContainerOptions).on("fixPosition",nt.setDropdownPosition).on("fixPosition",nt.setItemsPositions).on("assignSuggestions",nt.suggest);var it={addon:null},st={NONE:"none",SPINNER:"spinner",CLEAR:"clear"},ot=function(t){var e=B.select('<span class="suggestions-addon"/>');this.owner=t,this.$el=e,this.type=st.NONE,this.visible=!1,this.initialPadding=null,e.on("click",B.proxy(this,"onClick"))};ot.prototype={checkType:function(){var t=this.owner.options.addon,e=!1;y.each(st,function(n,i){if(e=n==t)return!1}),e||(t=this.owner.isMobile?st.CLEAR:st.SPINNER),t!=this.type&&(this.type=t,this.$el.attr("data-addon-type",t),this.toggle(!0))},isEnabled:function(){return!this.owner.isElementDisabled()},toggle:function(t){var e;switch(this.type){case st.CLEAR:e=!!this.owner.currentValue;break;case st.SPINNER:e=!!this.owner.currentRequest;break;default:e=!1}this.isEnabled()||(e=!1),e!=this.visible&&(this.visible=e,e?this.show(t):this.hide(t))},show:function(t){var e=this,n={opacity:1};t?(this.$el.show().css(n),this.showBackground(!0)):this.$el.stop(!0,!0).delay(50).queue(function(){e.$el.show(),e.showBackground(),e.$el.dequeue()}).animate(n,"fast")},hide:function(t){var e=this,n={opacity:0};t&&this.$el.hide().css(n),this.$el.stop(!0).animate(n,{duration:"fast",complete:function(){e.$el.hide(),e.hideBackground()}})},fixPosition:function(t,e){var n=e.innerHeight;this.checkType(),this.$el.css({left:t.left+e.borderLeft+e.innerWidth-n+"px",top:t.top+e.borderTop+"px",height:n,width:n}),this.initialPadding=e.paddingRight,this.width=n,this.visible&&(e.componentsRight+=n)},showBackground:function(t){var e=this.owner.el,n={paddingRight:this.width};this.width>this.initialPadding&&(this.stopBackground(),t?e.css(n):e.animate(n,{duration:"fast",queue:"addon"}).dequeue("addon"))},hideBackground:function(t){var e=this.owner.el,n={paddingRight:this.initialPadding};this.width>this.initialPadding&&(this.stopBackground(!0),t?e.css(n):e.delay(50,"addon").animate(n,{duration:"fast",queue:"addon"}).dequeue("addon"))},stopBackground:function(t){this.owner.el.stop("addon",!0,t)},onClick:function(t){this.isEnabled()&&this.type==st.CLEAR&&this.owner.clear()}};var at={createAddon:function(){var t=new ot(this);this.$wrapper.append(t.$el),this.addon=t},fixAddonPosition:function(t,e){this.addon.fixPosition(t,e)},checkAddonType:function(){this.addon.checkType()},checkAddonVisibility:function(){this.addon.toggle()},stopBackground:function(){this.addon.stopBackground()}};B.extend(j,it),W.on("initialize",at.createAddon).on("setOptions",at.checkAddonType).on("fixPosition",at.fixAddonPosition).on("clear",at.checkAddonVisibility).on("valueChange",at.checkAddonVisibility).on("request",at.checkAddonVisibility).on("resetPosition",at.stopBackground);var rt={constraints:null,restrict_value:!1},lt=["country_iso_code","region_iso_code","region_fias_id","area_fias_id","city_fias_id","city_district_fias_id","settlement_fias_id","planning_structure_fias_id","street_fias_id"],ct=function(t,e){var n,i,s=this,o={};s.instance=e,s.fields={},s.specificity=-1,m.isPlainObject(t)&&e.type.dataComponents&&y.each(e.type.dataComponents,function(e,n){var i=e.id;e.forLocations&&t[i]&&(s.fields[i]=t[i],s.specificity=n)}),n=Object.keys(s.fields),i=y.intersect(n,lt),i.length?(y.each(i,function(t,e){o[t]=s.fields[t]}),s.fields=o,s.specificity=s.getFiasSpecificity(i)):s.fields.kladr_id&&(s.fields={kladr_id:s.fields.kladr_id},s.significantKladr=p(s.fields.kladr_id),s.specificity=s.getKladrSpecificity(s.significantKladr))};B.extend(ct.prototype,{getLabel:function(){return this.instance.type.composeValue(this.fields,{saveCityDistrict:!0})},getFields:function(){return this.fields},isValid:function(){return!m.isEmptyObject(this.fields)},getKladrSpecificity:function(t){var e=-1,n=t.length;return y.each(this.instance.type.dataComponents,function(t,i){t.kladrFormat&&n===t.kladrFormat.digits&&(e=i)}),e},getFiasSpecificity:function(t){var e=-1;return y.each(this.instance.type.dataComponents,function(n,i){n.fiasType&&t.indexOf(n.fiasType)>-1&&e<i&&(e=i)}),e},containsData:function(t){var e=!0;return this.fields.kladr_id?!!t.kladr_id&&0===t.kladr_id.indexOf(this.significantKladr):(y.each(this.fields,function(n,i){return e=!!t[i]&&t[i].toLowerCase()===n.toLowerCase()}),e)}}),a.ConstraintLocation=ct;var ut=function(t,e){this.id=P("c"),this.deletable=!!t.deletable,this.instance=e;var n=y.makeArray(t&&(t.locations||t.restrictions));this.locations=n.map(function(t){return new ct(t,e)}),this.locations=this.locations.filter(function(t){return t.isValid()}),this.label=t.label,null==this.label&&e.type.composeValue&&(this.label=this.locations.map(function(t){return t.getLabel()}).join(", ")),this.label&&this.isValid()&&(this.$el=B.select(document.createElement("li")).append(B.select(document.createElement("span")).text(this.label)).attr("data-constraint-id",this.id),this.deletable&&this.$el.append(B.select(document.createElement("span")).addClass(e.classes.removeConstraint)))};B.extend(ut.prototype,{isValid:function(){return this.locations.length>0},getFields:function(){return this.locations.map(function(t){return t.getFields()})}});var dt={createConstraints:function(){var t=this;t.constraints={},t.$constraints=B.select('<ul class="suggestions-constraints"/>'),t.$wrapper.append(t.$constraints),t.$constraints.on("click","."+t.classes.removeConstraint,B.proxy(t.onConstraintRemoveClick,t))},setConstraintsPosition:function(t,e){var n=this;n.$constraints.css({left:t.left+e.borderLeft+e.paddingLeft+"px",top:t.top+e.borderTop+Math.round((e.innerHeight-n.$constraints.height())/2)+"px"}),e.componentsLeft+=n.$constraints.outerWidth(!0)+e.paddingLeft},onConstraintRemoveClick:function(t){var e=this,n=B.select(t.target).closest("li"),i=n.attr("data-constraint-id");delete e.constraints[i],e.update(),n.fadeOut("fast",function(){e.removeConstraint(i)})},setupConstraints:function(){var t,e=this,n=e.options.constraints;if(!n)return void e.unbindFromParent();B.isJqObject(n)||"string"==typeof n||"number"==typeof n.nodeType?(t=B.select(n),t.is(e.constraints)||(e.unbindFromParent(),t.is(e.el)||(e.constraints=t,e.bindToParent()))):(e._constraintsUpdating=!0,y.each(e.constraints,function(t,n){e.removeConstraint(n)}),y.each(y.makeArray(n),function(t,n){e.addConstraint(t)}),e._constraintsUpdating=!1,e.fixPosition())},filteredLocation:function(t){var e=[],n={};if(y.each(this.type.dataComponents,function(){this.forLocations&&e.push(this.id)}),m.isPlainObject(t)&&y.each(t,function(t,i){t&&e.indexOf(i)>=0&&(n[i]=t)}),!m.isEmptyObject(n))return n.kladr_id?{kladr_id:n.kladr_id}:n},addConstraint:function(t){var e=this;t=new ut(t,e),t.isValid()&&(e.constraints[t.id]=t,t.$el&&(e.$constraints.append(t.$el),e._constraintsUpdating||e.fixPosition()))},removeConstraint:function(t){var e=this;delete e.constraints[t],e.$constraints.children('[data-constraint-id="'+t+'"]').remove(),e._constraintsUpdating||e.fixPosition()},constructConstraintsParams:function(){for(var t,e,n=this,i=[],s=n.constraints,o={};B.isJqObject(s)&&(t=s.suggestions())&&!(e=v.getDeepValue(t,"selection.data"));)s=t.constraints;return B.isJqObject(s)?(e=new ct(e,t).getFields())&&(n.bounds.own.indexOf("city")>-1&&delete e.city_fias_id,o.locations=[e],o.restrict_value=!0):s&&(y.each(s,function(t,e){i=i.concat(t.getFields())}),i.length&&(o.locations=i,o.restrict_value=n.options.restrict_value)),o},getFirstConstraintLabel:function(){var t=this,e=m.isPlainObject(t.constraints)&&Object.keys(t.constraints)[0];return e?t.constraints[e].label:""},bindToParent:function(){var t=this;t.constraints.on(["suggestions-select."+t.uniqueId,"suggestions-invalidateselection."+t.uniqueId,"suggestions-clear."+t.uniqueId].join(" "),B.proxy(t.onParentSelectionChanged,t)).on("suggestions-dispose."+t.uniqueId,B.proxy(t.onParentDispose,t))},unbindFromParent:function(){var t=this,e=t.constraints;B.isJqObject(e)&&e.off("."+t.uniqueId)},onParentSelectionChanged:function(t,e,n){("suggestions-select"!==t.type||n)&&this.clear()},onParentDispose:function(t){this.unbindFromParent()},getParentInstance:function(){return B.isJqObject(this.constraints)&&this.constraints.suggestions()},shareWithParent:function(t){var e=this.getParentInstance();e&&e.type===this.type&&!f(t,e)&&(e.shareWithParent(t),e.setSuggestion(t))},getUnrestrictedData:function(t){var e=this,n=[],i={},s=-1;return y.each(e.constraints,function(e,n){y.each(e.locations,function(e,n){e.containsData(t)&&e.specificity>s&&(s=e.specificity)})}),s>=0?(t.region_kladr_id&&t.region_kladr_id===t.city_kladr_id&&n.push.apply(n,e.type.dataComponentsById.city.fields),y.each(e.type.dataComponents.slice(0,s+1),function(t,e){n.push.apply(n,t.fields)}),y.each(t,function(t,e){-1===n.indexOf(e)&&(i[e]=t)})):i=t,i}};B.extend(j,rt),B.extend(a.prototype,dt),"GET"!=T.getDefaultType()&&W.on("initialize",dt.createConstraints).on("setOptions",dt.setupConstraints).on("fixPosition",dt.setConstraintsPosition).on("requestParams",dt.constructConstraintsParams).on("dispose",dt.unbindFromParent);var ft={proceedQuery:function(t){var e=this;t.length>=e.options.minChars?e.updateSuggestions(t):e.hide()},selectCurrentValue:function(t){var e=this,n=B.Deferred();return e.inputPhase.resolve(),e.fetchPhase.done(function(){var i;e.selection&&!e.visible?n.reject():(i=e.findSuggestionIndex(),e.select(i,t),-1===i?n.reject():n.resolve(i))}).fail(function(){n.reject()}),n},selectFoundSuggestion:function(){var t=this;t.requestMode.userSelect||t.select(0)},findSuggestionIndex:function(){var t,e=this,n=e.selectedIndex;return-1===n&&(t=e.el.val().trim())&&e.type.matchers.some(function(i){return-1!==(n=i(t,e.suggestions))}),n},select:function(t,e){var n,i=this,s=i.suggestions[t],o=e&&e.continueSelecting,a=i.currentValue;if(!i.triggering.Select){if(!s)return o||i.selection||i.triggerOnSelectNothing(),void i.onSelectComplete(o);n=i.hasSameValues(s),i.enrichSuggestion(s,e).done(function(s,o){var r=B.extend({hasBeenEnriched:o,hasSameValues:n},e);i.selectSuggestion(s,t,a,r)})}},selectSuggestion:function(t,e,n,i){var s=this,o=i.continueSelecting,a=!s.type.isDataComplete||s.type.isDataComplete.call(s,t),r=s.selection;s.triggering.Select||(s.type.alwaysContinueSelecting&&(o=!0),a&&(o=!1),i.hasBeenEnriched&&s.suggestions[e]&&(s.suggestions[e].data=t.data),s.requestMode.updateValue&&(s.checkValueBounds(t),s.currentValue=s.getSuggestionValue(t,i),!s.currentValue||i.noSpace||a||(s.currentValue+=" "),s.el.val(s.currentValue)),s.currentValue?(s.selection=t,s.areSuggestionsSame(t,r)||s.trigger("Select",t,s.currentValue!=n),s.requestMode.userSelect&&s.onSelectComplete(o)):(s.selection=null,s.triggerOnSelectNothing()),s.shareWithParent(t))},onSelectComplete:function(t){var e=this;t?(e.selectedIndex=-1,e.updateSuggestions(e.currentValue)):e.hide()},triggerOnSelectNothing:function(){var t=this;t.triggering.SelectNothing||t.trigger("SelectNothing",t.currentValue)},trigger:function(t){var e=this,n=L.slice(arguments,1),i=e.options["on"+t];e.triggering[t]=!0,L.isFunction(i)&&i.apply(e.element,n),e.el.trigger.call(e.el,"suggestions-"+t.toLowerCase(),n),e.triggering[t]=!1}};B.extend(a.prototype,ft),W.on("assignSuggestions",ft.selectFoundSuggestion);var pt={bounds:null},gt={setupBounds:function(){this.bounds={from:null,to:null}},setBoundsOptions:function(){var e,n,i=this,s=[],o=t.trim(i.options.bounds).split("-"),a=o[0],r=o[o.length-1],l=[],c=[];i.type.dataComponents&&t.each(i.type.dataComponents,function(){this.forBounds&&s.push(this.id)}),-1===t.inArray(a,s)&&(a=null),n=t.inArray(r,s),-1!==n&&n!==s.length-1||(r=null),(a||r)&&(e=!a,t.each(s,function(t,n){if(n==a&&(e=!0),c.push(n),e&&l.push(n),n==r)return!1})),i.bounds.from=a,i.bounds.to=r,i.bounds.all=c,i.bounds.own=l},constructBoundsParams:function(){var t=this,e={};return t.bounds.from&&(e.from_bound={value:t.bounds.from}),t.bounds.to&&(e.to_bound={value:t.bounds.to}),e},checkValueBounds:function(t){var e,n=this;if(n.bounds.own.length&&n.type.composeValue){var i=n.bounds.own.slice(0);1===i.length&&"city_district"===i[0]&&i.push("city_district_fias_id"),e=n.copyDataComponents(t.data,i),t.value=n.type.composeValue(e)}},copyDataComponents:function(e,n){var i={},s=this.type.dataComponentsById;return s&&t.each(n,function(n,o){t.each(s[o].fields,function(t,n){null!=e[n]&&(i[n]=e[n])})}),i},getBoundedKladrId:function(e,n){var i,s=n[n.length-1];return t.each(this.type.dataComponents,function(t,e){if(e.id===s)return i=e.kladrFormat,!1}),e.substr(0,i.digits)+new Array((i.zeros||0)+1).join("0")}};t.extend(j,pt),t.extend(a.prototype,gt),W.on("initialize",gt.setupBounds).on("setOptions",gt.setBoundsOptions).on("requestParams",gt.constructBoundsParams);var ht={selectByClass:function(t,e){var n="."+t;return e?e.querySelector(n):document.querySelector(n)},addClass:function(t,e){var n=t.className.split(" ");-1===n.indexOf(e)&&n.push(e),t.className=n.join(" ")},setStyle:function(t,e,n){t.style[e]=n},listenTo:function(t,e,n,i){t.addEventListener(e,i,!1),n&&(eventsByNamespace[n]||(eventsByNamespace[n]=[]),eventsByNamespace[n].push({eventName:e,element:t,callback:i}))},stopListeningNamespace:function(t){var e=eventsByNamespace[t];e&&e.forEach(function(t){t.element.removeEventListener(t.eventName,t.callback,!1)})}};g.prototype.show=function(){"FREE"===this.plan&&this.element&&(this.setStyles(),this.setHtml())},g.prototype.setStyles=function(){this.element.style.display="block",this.isMobile||this.element.classList.add(x.promo_desktop)},g.prototype.setHtml=function(){this.element.innerHTML='<a target="_blank" href="https://dadata.ru/suggestions/?utm_source=dadata&utm_medium=module&utm_campaign=suggestions-jquery"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 167.55 38.92"><defs><style>.cls-1{fill:#cdcccc;}.cls-2{fill:#ef4741;}.cls-3{fill:#fff;}</style></defs><title>dadata-logo</title><path class="cls-1" d="M192.61,153.07H196v-3.15h-3.39Zm9.55-14.46v-2.45h-3v16.91h3.14V142.2a4.39,4.39,0,0,1,4.23-3.7h1.75v-2.69h-1.54C203.75,135.81,202.35,137.76,202.16,138.61Zm20.2-2.45v11.3a5,5,0,0,1-4.65,3.66,7.19,7.19,0,0,1-2-.23,2,2,0,0,1-1.12-.6,2.38,2.38,0,0,1-.44-.86,4.38,4.38,0,0,1-.1-1V136.16h-3.14v12.4a4.83,4.83,0,0,0,1.26,3.65q1.26,1.21,4.61,1.21c3.38,0,4.62-.91,5.56-2.34v2h3.14V136.16Z" transform="translate(-57.96 -122.27)"/><rect class="cls-2" width="131.91" height="38.92" rx="3" ry="3"/><path class="cls-3" d="M119.34,130.39h-9.18v22.68h10.23c3.84,0,10.18-.35,10.18-6.88v-8.91C130.56,130.74,123.18,130.39,119.34,130.39Zm5.77,15.2c0,3.27-2.38,3.6-5.09,3.6h-4.41V134.27H119c2.71,0,6.14.33,6.14,3.6Zm-48-15.2H68v22.68H78.18c3.84,0,10.18-.35,10.18-6.88v-8.91C88.36,130.74,81,130.39,77.14,130.39Zm5.77,15.2c0,3.27-2.38,3.6-5.09,3.6H73.41V134.27h3.36c2.71,0,6.14.33,6.14,3.6Zm74-14.32h-5.1V148a6.28,6.28,0,0,0,.4,2.36,4,4,0,0,0,1,1.54,4.56,4.56,0,0,0,1.57.88,8.16,8.16,0,0,0,1.85.42q.89.08,2.08.09a24.23,24.23,0,0,0,2.83-.17v-2.87h-1.82a3.08,3.08,0,0,1-2.31-.61,3.79,3.79,0,0,1-.52-2.36V139h4.65v-3.14h-4.65Zm21,5.68q-1.82-1.14-6.5-1.13h-5.92v.25l.73,2.9h5.19a5,5,0,0,1,2.5.5,2.37,2.37,0,0,1,.72,2v1.15H168.9q-3,0-4.12,1.17T163.62,148c0,2.21.37,3.14,1.12,3.84s2.2,1.22,4.48,1.22h7.06c1.76,0,3.45-.83,3.45-2.82v-8.81Q179.73,138.08,177.91,136.94Zm-3.29,13.3h-3.35a4.27,4.27,0,0,1-2.22-.35q-.44-.35-.44-2t.42-2.06a3.55,3.55,0,0,1,2.1-.38h3.49Zm-27.5-13.3q-1.82-1.14-6.5-1.13h-5.92v.25l.73,2.9h5.19a5,5,0,0,1,2.5.5,2.38,2.38,0,0,1,.72,2v1.15h-5.73q-3,0-4.12,1.17T132.84,148c0,2.21.37,3.14,1.12,3.84s2.2,1.22,4.48,1.22h7.06c1.77,0,3.45-.83,3.45-2.82v-8.81Q148.94,138.08,147.13,136.94Zm-3.28,13.3h-3.35a4.27,4.27,0,0,1-2.22-.35q-.44-.35-.44-2t.42-2.06a3.55,3.55,0,0,1,2.1-.38h3.49Zm-38.92-13.3q-1.82-1.14-6.5-1.13H92.5v.25l.73,2.9h5.19a5,5,0,0,1,2.5.5,2.38,2.38,0,0,1,.72,2v1.15H95.91q-3,0-4.12,1.17T90.63,148c0,2.21.37,3.14,1.12,3.84s2.2,1.22,4.48,1.22h7.06c1.77,0,3.45-.83,3.45-2.82v-8.81Q106.74,138.08,104.92,136.94Zm-3.28,13.3H98.29a4.27,4.27,0,0,1-2.22-.35q-.44-.35-.44-2t.42-2.06a3.55,3.55,0,0,1,2.1-.38h3.49Z" transform="translate(-57.96 -122.27)"/></svg></a>'},W.on("assignSuggestions",h),a.defaultOptions=j,a.version="20.2.0",t.Suggestions=a,t.fn.suggestions=function(e,n){return 0===arguments.length?this.first().data("suggestions"):this.each(function(){var i=t(this),s=i.data("suggestions");"string"==typeof e?s&&"function"==typeof s[e]&&s[e](n):(s&&s.dispose&&s.dispose(),s=new a(this,e),i.data("suggestions",s))})}});